{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate,useParams,useSearchParams}from\"react-router-dom\";import AdminHeader from\"../../components/AdminHeader\";import AdminButton from\"../../components/AdminButton\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubjectEdit=()=>{const[data,setData]=useState({subjectId:\"\",subjectName:\"\"});const{id}=useParams();const navigate=useNavigate();useEffect(()=>{fetchuserData();},[]);//가져온 과목데이터 실행\nconst fetchuserData=async()=>{try{const response=await axios.get(\"/admin/subject/view\");const userData=response.data.find(item=>item.subjectId==id);setData({subjectId:userData.subjectId,subjectName:userData.subjectName});}catch(error){if(error.response.status===500){alert(error.response.data.message);}else if(error.response.status===401||error.response.status===403){alert(error.response.data.message);sessionStorage.removeItem(\"token\");navigate(\"/admin/login\");}}};// api로 과목 정보 받아오는 함수\nconst handleSubmit=()=>{axios.post(\"/admin/subject/update\",{subjectName:data.subjectName,subjectId:data.subjectId}).then(response=>{alert(\"과목이 수정되었습니다.\");window.location.reload();}).catch(error=>{if(error.response.status===500){alert(error.response.data.message);}else if(error.response.status===401||error.response.status===403){alert(error.response.data.message);sessionStorage.removeItem(\"token\");navigate(\"/admin/login\");}});navigate(\"/admin/subject/view\");};// axios 이용하여 회차 생성처리하는 함수\nconst handleChange=event=>{const{name,value}=event.target;setData(prevState=>({...prevState,[name]:value}));};//정보 수정 입력하면 바뀌는 함수\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"AdminEntire\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(\"div\",{className:\"UserText\",children:\"\\uACFC\\uBAA9 \\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"input\",{name:\"subjectName\",className:\"RoundCreateBox\",value:data.subjectName,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"RoundCreateButtonList\",children:[/*#__PURE__*/_jsx(AdminButton,{text:\"\\uCDE8\\uC18C\",className:\"RoundCreateButton\",onClick:()=>navigate(-1)}),/*#__PURE__*/_jsx(AdminButton,{text:\"\\uC644\\uB8CC\",className:\"RoundCreateButton\",onClick:handleSubmit})]})]});};export default SubjectEdit;","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","useParams","useSearchParams","AdminHeader","AdminButton","jsx","_jsx","jsxs","_jsxs","SubjectEdit","data","setData","subjectId","subjectName","id","navigate","fetchuserData","response","get","userData","find","item","error","status","alert","message","sessionStorage","removeItem","handleSubmit","post","then","window","location","reload","catch","handleChange","event","name","value","target","prevState","className","children","onChange","text","onClick"],"sources":["C:/Users/100li/Desktop/admin/src/page/Subject/SubjectEdit.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams, useSearchParams } from \"react-router-dom\";\r\nimport AdminHeader from \"../../components/AdminHeader\";\r\nimport AdminButton from \"../../components/AdminButton\";\r\n\r\nconst SubjectEdit=()=>{\r\n    const [data,setData]=useState({\r\n        subjectId:\"\",\r\n        subjectName:\"\"\r\n    });\r\n    const {id}=useParams();\r\n    const navigate=useNavigate();\r\n    useEffect(() => {\r\n        fetchuserData();\r\n     }, []); //가져온 과목데이터 실행\r\n    \r\n     \r\n       const fetchuserData = async () => {     \r\n         try {\r\n             const response = await axios.get(`/admin/subject/view`);\r\n             const userData = response.data.find(item => item.subjectId ==id);\r\n             setData({\r\n                subjectId:userData.subjectId,\r\n                subjectName:userData.subjectName});\r\n        \r\n    \r\n         }catch (error) {\r\n         if(error.response.status===500){\r\n           alert(error.response.data.message);\r\n          }\r\n          else if(error.response.status===401 || error.response.status===403){\r\n            alert(error.response.data.message);\r\n            sessionStorage.removeItem(\"token\");\r\n            navigate(\"/admin/login\");\r\n           }\r\n         } } // api로 과목 정보 받아오는 함수\r\n\r\n         const handleSubmit=()=>{\r\n            axios.post(`/admin/subject/update`,{\r\n                subjectName:data.subjectName,\r\n                subjectId:data.subjectId\r\n            }).then(response => {        \r\n                alert(\"과목이 수정되었습니다.\");\r\n                window.location.reload();\r\n            })\r\n            .catch(error => {\r\n               if(error.response.status===500){\r\n                 alert(error.response.data.message);\r\n               }\r\n              else if(error.response.status===401 || error.response.status===403){\r\n                 alert(error.response.data.message);\r\n                 sessionStorage.removeItem(\"token\");\r\n                 navigate(\"/admin/login\");\r\n                }\r\n            });\r\n            navigate(\"/admin/subject/view\");\r\n           }  // axios 이용하여 회차 생성처리하는 함수\r\n\r\n         const handleChange = (event) => {\r\n            const { name, value } = event.target;\r\n            setData(prevState => ({\r\n                ...prevState,\r\n                [name]: value\r\n            }));\r\n        \r\n        }; //정보 수정 입력하면 바뀌는 함수\r\n return(\r\n    <div className=\"AdminEntire\">\r\n    <AdminHeader/>\r\n    <div className=\"UserText\">과목 수정</div>\r\n    <input name=\"subjectName\" className=\"RoundCreateBox\" value={data.subjectName} onChange={handleChange} ></input>\r\n    <div className=\"RoundCreateButtonList\">\r\n    <AdminButton text=\"취소\" className=\"RoundCreateButton\" onClick={()=>navigate(-1)}/>\r\n    <AdminButton text=\"완료\" className=\"RoundCreateButton\" onClick={handleSubmit}/>\r\n    </div></div>\r\n )\r\n};\r\nexport default SubjectEdit;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}