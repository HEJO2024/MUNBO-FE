{"ast":null,"code":"import{useEffect,useState}from\"react\";import AdminHeader from\"../../components/AdminHeader\";import axios from'axios';import{Link,useNavigate}from\"react-router-dom\";import AdminButton from\"../../components/AdminButton\";import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserView=()=>{const navigate=useNavigate();const[data,setData]=useState([]);// 전체 사용자 정보\nconst token=sessionStorage.getItem(\"token\");useEffect(()=>{userData();},[]);// 사용자정보 가져오기 실행하는 함수\nconst userData=async()=>{try{const response=await axios.get(\"/admin/users/listView\",{headers:{'Authorization':token}});setData(response.data.users);}catch(error){if(error.response.status===500){alert(error.response.data.message);}else if(error.response.status===401||error.response.status===403){alert(error.response.data.message);sessionStorage.removeItem(\"token\");navigate(\"/admin/login\");}}};//api로 전체 사용자 정보 가져오는 함수\nconst handleDelete=async userId=>{Swal.fire({title:'정말로 삭제하시겠습니까?',text:\"이 작업은 되돌릴 수 없습니다!\",icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'네, 삭제합니다!',cancelButtonText:'아니오, 취소합니다!'}).then(result=>{if(result.isConfirmed){//삭제하기 누르면\naxios.delete(\"/admin/users/delete\",{userId:userId},{headers:{'Authorization':token}}).then(response=>{//삭제성공   \nSwal.fire('삭제 완료!','해당 항목이 성공적으로 삭제되었습니다.','success');window.location.reload();}).catch(error=>{//삭제 실패\nif(error.response.status===404){Swal.fire('삭제 실패!',error.response.data.message,'fail');}else if(error.response.status===500){Swal.fire('삭제 실패!',error.response.data.message,'fail');}else if(error.response.status===401||error.response.status===403){sessionStorage.removeItem(\"token\");Swal.fire('삭제 실패!',error.response.data.message,'fail');navigate('/admin/login');};window.location.reload();});}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"AdminEntire\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(\"div\",{className:\"UserText\",children:\"\\uC0AC\\uC6A9\\uC790 \\uC870\\uD68C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserAll\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"UserMenuList\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem1\",children:\"ID\"}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem2\",children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem3\",children:\"\\uB2C9\\uB124\\uC784\"}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem4\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem5\",children:\"\\uC2DD\\uBCC4\\uCF54\\uB4DC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem5\",children:\"\\uC218\\uC815\\uD558\\uAE30\"}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"UserMenuItem5\",children:\"\\uC0AD\\uC81C\\uD558\\uAE30\"})]}),/*#__PURE__*/_jsx(\"div\",{children:data&&data.map(it=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"UserList\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"UserItem1\",children:it.userId}),/*#__PURE__*/_jsx(\"div\",{className:\"UserItem2\",children:it.passwd}),/*#__PURE__*/_jsx(\"div\",{className:\"UserItem3\",children:it.userName}),/*#__PURE__*/_jsx(\"div\",{className:\"UserItem4\",children:it.userEmail}),/*#__PURE__*/_jsx(\"div\",{className:\"UserItem5\",children:it.is_admin}),/*#__PURE__*/_jsx(Link,{to:\"/admin/user/edit/\".concat(it.userId),className:\"UserItem6\",children:\"\\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(AdminButton,{text:\"\\uC0AD\\uC81C\\uD558\\uAE30\",onClick:()=>handleDelete(it.userId),className:\"UserItem6\"})]});})})]})]});};export default UserView;","map":{"version":3,"names":["useEffect","useState","AdminHeader","axios","Link","useNavigate","AdminButton","Swal","jsx","_jsx","jsxs","_jsxs","UserView","navigate","data","setData","token","sessionStorage","getItem","userData","response","get","headers","users","error","status","alert","message","removeItem","handleDelete","userId","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","delete","window","location","reload","catch","className","children","map","it","passwd","userName","userEmail","is_admin","to","concat","onClick"],"sources":["C:/Users/100li/Desktop/admin/src/page/User/UserView.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport AdminHeader from \"../../components/AdminHeader\";\r\nimport axios from 'axios';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport AdminButton from \"../../components/AdminButton\";\r\nimport Swal from 'sweetalert2';\r\nconst UserView=()=>{\r\n   const navigate=useNavigate();\r\n    const [data,setData]=useState([]); // 전체 사용자 정보\r\n    const token=sessionStorage.getItem(\"token\")\r\n    useEffect(() => {\r\n      userData();\r\n\r\n   }, []); // 사용자정보 가져오기 실행하는 함수\r\n\r\n\r\n     const userData = async () => {\r\n       \r\n       try {\r\n\r\n           const response = await axios.get(`/admin/users/listView`,{\r\n           headers:{\r\n              'Authorization':token\r\n            }\r\n           });\r\n           setData(response.data.users);\r\n           \r\n       } catch (error) {\r\n       if(error.response.status===500){\r\n        alert(error.response.data.message);\r\n       }\r\n       else if(error.response.status===401 || error.response.status===403){\r\n        alert(error.response.data.message);\r\n        sessionStorage.removeItem(\"token\");\r\n        navigate(\"/admin/login\");\r\n       }\r\n      }\r\n   }; //api로 전체 사용자 정보 가져오는 함수\r\n\r\nconst handleDelete=async(userId)=>{\r\n  Swal.fire({\r\n    title: '정말로 삭제하시겠습니까?',\r\n    text: \"이 작업은 되돌릴 수 없습니다!\",\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonColor: '#3085d6',\r\n    cancelButtonColor: '#d33',\r\n    confirmButtonText: '네, 삭제합니다!',\r\n    cancelButtonText: '아니오, 취소합니다!'\r\n}).then((result) => { \r\n    if (result.isConfirmed) { //삭제하기 누르면\r\n\r\n      axios.delete(`/admin/users/delete`, \r\n      {\r\n        userId:userId,\r\n      },\r\n      {\r\n        headers:{\r\n          'Authorization':token\r\n        },\r\n         \r\n\r\n      } )\r\n     .then(response => {   //삭제성공   \r\n      Swal.fire(\r\n        '삭제 완료!',\r\n        '해당 항목이 성공적으로 삭제되었습니다.',\r\n        'success'\r\n    );\r\n         window.location.reload();\r\n     })\r\n     .catch(error => {  //삭제 실패\r\n      if(error.response.status===404){\r\n        Swal.fire(\r\n          '삭제 실패!',\r\n          error.response.data.message,\r\n          'fail'\r\n      );\r\n      }\r\n      else if(error.response.status===500){\r\n        Swal.fire(\r\n          '삭제 실패!',\r\n          error.response.data.message,\r\n          'fail'\r\n      );\r\n      }\r\n      else if(error.response.status===401 || error.response.status===403){\r\n        sessionStorage.removeItem(\"token\");\r\n       Swal.fire(\r\n        '삭제 실패!',\r\n        error.response.data.message,\r\n        'fail'\r\n    ) ;\r\n     navigate('/admin/login')\r\n    };\r\n     window.location.reload();\r\n    \r\n    });\r\n  }\r\n});\r\n};\r\n return(\r\n    <div className=\"AdminEntire\">\r\n        <AdminHeader/>\r\n        <div className=\"UserText\">사용자 조회</div>\r\n        <div className=\"UserAll\">\r\n        <div className=\"UserMenuList\">\r\n            <div className=\"UserMenuItem1\">ID</div> <div className=\"UserMenuItem2\">비밀번호</div>\r\n             <div className=\"UserMenuItem3\">닉네임</div> <div className=\"UserMenuItem4\">이메일</div> \r\n             <div className=\"UserMenuItem5\">식별코드</div> \r\n             <div className=\"UserMenuItem5\">수정하기</div> <div className=\"UserMenuItem5\">삭제하기</div>\r\n        </div>\r\n        <div>\r\n        {data&&data.map((it)=>{\r\n           return(\r\n            <div className=\"UserList\">\r\n            <div className=\"UserItem1\">{it.userId}</div>\r\n            <div className=\"UserItem2\">{it.passwd}</div>\r\n            <div className=\"UserItem3\">{it.userName}</div>\r\n            <div className=\"UserItem4\">{it.userEmail}</div>\r\n            <div className=\"UserItem5\">{it.is_admin}</div>\r\n            <Link to={`/admin/user/edit/${it.userId}`} className=\"UserItem6\">수정하기</Link>\r\n            <AdminButton text=\"삭제하기\" onClick={()=>handleDelete(it.userId)} className=\"UserItem6\"/>\r\n            </div>\r\n           )\r\n        })}\r\n        </div>\r\n        </div>\r\n    </div>\r\n )\r\n};\r\nexport default UserView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}